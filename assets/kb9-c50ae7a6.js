import{o as t,b as r}from"./events-4b61dc80.js";const l="openBarBtn";async function n(){let e=await WA.state.loadVariable("players");return e||(console.log("No players found, initializing to an empty array."),e=[],await WA.state.saveVariable("players",e)),new Set(e)}function i(e,a){n().then(o=>{e?(o.add(a),console.log(`Player added: ${a}`)):(o.delete(a),console.log(`Player removed: ${a}`)),WA.state.saveVariable("players",Array.from(o)).then(()=>{console.log(`Updated players list: ${Array.from(o)}`)})})}WA.onInit().then(async()=>{console.log("Script started successfully."),t(WA.player),console.log("Player spawn detected:",WA.player.uuid),WA.player.uuid&&i(!0,WA.player.uuid),WA.event.on("teleportPlayer").subscribe(async e=>{if(WA.player.uuid===e.data){const a=Math.floor(Math.random()*4)+1;await new Promise(o=>setTimeout(o,a*300)),WA.nav.goToRoom("./map_gold.tmj"),console.log("Teleported player:",WA.player.uuid)}}),WA.event.on("backTeleportPlayer").subscribe(async e=>{if(WA.player.uuid===e.data){const a=Math.floor(Math.random()*4)+1;await new Promise(o=>setTimeout(o,a*300)),WA.nav.goToRoom("./map.tmj"),console.log("Teleported player:",WA.player.uuid)}}),WA.ui.actionBar.addButton({id:l,label:"Maps",callback:()=>{WA.ui.website.open({url:"./src/bar/bar.html",position:{vertical:"middle",horizontal:"middle"},size:{height:"80vh",width:"50vh"},margin:{right:"12px"},allowApi:!0}),console.log("Bar page opened")}}),r().then(()=>{console.log("Scripting API Extra ready.")}).catch(e=>console.error(e))}).catch(e=>console.error(e));
