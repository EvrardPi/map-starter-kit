import{d as t,b as o}from"./events-4b61dc80.js";console.log("Script started successfully");const l="backToWaitingRoomBtn";WA.onInit().then(()=>{WA.player.state.canPlaceTile=!0,WA.player.onPlayerMove(a=>{WA.player.state.canPlaceTile&&WA.player.state.tileColor&&(console.log({x:a.x/32,y:a.y/32,tile:Number(WA.player.state.tileColor),layer:"transparent"}),WA.room.setTiles([{x:Math.round(a.x/32),y:Math.round(a.y/32),tile:Number(WA.player.state.tileColor),layer:"transparent"}]),WA.player.state.canPlaceTile=!1,WA.state.onVariableChange("map").subscribe(e=>{WA.room.setTiles([{x:e.x,y:e.y,tile:e.tile,layer:"transparent"}]),console.log('Variable "map" changed. New value: ',e)}),WA.state.saveVariable("map",{x:Math.round(a.x/32),y:Math.round(a.y/32),tile:Number(WA.player.state.tileColor)}).catch(e=>console.error("Something went wrong while saving variable",e)))}),WA.ui.actionBar.addButton({id:"choose-tile-color-btn",type:"action",imageSrc:"https://i.postimg.cc/RZnmV5v6/test-2.png",toolTip:"Select tile color",callback:async()=>{if(!WA.player.state.canPlaceTile)return;const a=await WA.ui.website.open({url:"./src/html/colors.html",position:{vertical:"top",horizontal:"middle"},size:{height:"30vh",width:"80vw"},margin:{top:"77vh"},allowApi:!0});WA.player.state.onVariableChange("tileColor").subscribe(e=>{e&&a.close()}),WA.player.state.onVariableChange("canPlaceTile").subscribe(async e=>{e||t()})}}),WA.ui.actionBar.addButton({id:l,label:"Waiting Room",callback:async a=>{WA.nav.goToRoom("./map.tmj")}}),o().then(()=>{console.log("Scripting API Extra ready")}).catch(a=>console.error(a))}).catch(a=>console.error(a));
